\chapter{Parameters}

\section{Introduction}
The \texttt{wannier90.x} code described in Part~\ref{part:w90}
calculates the maximally-localized Wannier functions. The \texttt{wannier90.x} code is a
serial executable (i.e., it cannot be executed in parallel on different
CPUs).

For users of the previous \wannier\ 1.2 release, the
\texttt{wannier90.x} executable has only a few minor changes with
respect to the 1.2 release (a major one being that part of the
transport routines have been moved to the \texttt{postw90.x}
executable).

The \texttt{postw90.x} executable contains instead a series of modules
that take the Wannier functions calculated by \texttt{wannier90.x} and
use them to calculate different properties.  This executable is
parallel (by means of MPI libraries), so it can be run on multiple
CPUs.  The information on the calculated Wannier functions is read
from the checkpoint \verb|seedname.chk| file. Note that this is
written in an unformatted machine-dependent format. If you need to use
this file on a different machine, or you want to use a version of
\texttt{postw90.x} compiled with a different compiler, refer to
Sec.~\ref{sec:w90chk2chk} in the Appendices for a description of how
to export/import this file.

\section{Usage}
For serial execution use: {\tt postw90.x [seedname]} 

\begin{itemize} \item 
{\tt seedname}: If a seedname string is given the code
will read its input from a file {\tt seedname.win}. The default
  value is {\tt wannier}. One can also equivalently provide the string
  {\tt seedname.win} instead of  {\tt seedname}.
\end{itemize}

For parallel execution use: {\tt mpirun -np NUMPROCS postw90.x [seedname]}

\begin{itemize} \item 
{\tt NUMPROCS}: substitute with the number of processors that you want
to use.
\end{itemize}

Note that this requires that the {\tt postw90.x} executable has been
compiled in its parallel version (see Sec.~\ref{sec:installation}) and
that the MPI libraries and binaries are installed and correctly
configured on your machine.

Note also that the {\tt mpirun} command-line flags may be different in your MPI implementation: read your MPI manual.


\section{\text{seedname.win} File}
The \texttt{postw90.x} uses the same \texttt{seedname.win} input file
of \texttt{wannier90.x}. The input keywords of \texttt{postw90.x} must
thus be added to this file, using the same syntax described in
Sec.~\ref{sec:seednamefile}. 

Note that \texttt{wannier90.x} checks if the syntax of the input file
is correct, but then ignores the value of the flags that refer only to
modules of \texttt{postw90.x}, so one can safely run
\texttt{wannier90.x} on a file that contains also \texttt{postw90.x}
flags.

Similarly, \texttt{postw90.x} ignores flags that refer only to
\texttt{wannier90.x} (as number of iterations, restart flags,
\ldots). However, some parts of the input file must be there, as for
instance the number of Wannier functions, etc.

The easiest thing to do
is therefore to simply \emph{add} the \texttt{postw90} input keywords to
the \texttt{seedname.win} file that was used
to obtain the Wannier functions.

\section{List of available modules}
The currently available modules in \texttt{postw90.x} are:
\begin{itemize}
\item \texttt{dos}: Calculation of the Density of States, Projected
  density of states, net spin etc.
\item \texttt{berry}: Calculation of properties related to the
  $k$-space Berry curvature and Berry connection, including anomalous
  Hall conductivity, orbital magnetisation, and interband optical
  conductivity (see Chap.~\ref{ch:berry}).
\item \texttt{kpath}: Calculation of $k$-space quantities along a
  piecewise linear path in the BZ
\item \texttt{kslice}: Calculation of $k$-space quantities on a planar
  slice of the BZ
\item \texttt{BoltzWann}: Calculation of electronic transport
  properties using the semiclassical Boltzmann transport equation (see Chap.~\ref{ch:boltzwann}).
\item \emph{Generic Band Interpolation}: Calculation band energies (and band
  derivatives) on a generic list of $k$ points (see Chap.~\ref{ch:geninterp}).
\end{itemize}


\section{Keyword List}
On the next pages the list of available
\postw\ input keywords is reported.
In particular, Table~\ref{parameter_keywords_postw90} reports keywords
that affect the generic behavior of all modules of
\postw. Often, these are ``global'' variables that can be overridden
by module-specific keywords (as for instance the {\tt interp\_mesh} flag).

\textcolor{red}{[Ivo: For conciseness, perhaps we should describe in
  detail the ``global'' variables, and provide only give a minimal
  description of the ``local'' counterparts later (focusing on what
  functionalities of the module are affected), refering back to the
  global definition for the generic properties. Right now there is a
  lot of redundancy, which makes the text unnecessary lengthy.]}

The subsequent tables describe input parameters relative to specific modules.

\clearpage

\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
  \hline
  Keyword & Type & Description \\
  &      &             \\
  \hline\hline
  \multicolumn{3}{|c|}{Global Interpolation Parameters} \\
  \hline
  {\sc interp\_mesh}   & I & Dimensions of the uniform interpolation $k$-mesh 
(one or three integers) \\
  {\sc adpt\_smr}   & L & Use adaptive smearing\\
  {\sc adpt\_smr\_factor}   & R & Adaptive smearing prefactor\\
  {\sc smr\_type}   & S &  Analytical form used for the broadened delta function\\
  {\sc smr\_fixed\_en\_width}   & P & Energy smearing (if non-adaptive)\\
  {\sc num\_elec\_per\_state}   & I & Number of electrons per state \\
  {\sc num\_valence\_bands}   & I & Number of valence bands \\
  {\sc scissors\_shift}   & P & Scissors shift applied to the conduction bands (eV) \\
  {\sc spn\_decomp}& L & Decompose various properties into
  up-spin, down-spin, and eventually spin-flip parts\\
  {\sc spn\_axis\_polar}& P & Polar angle of the spin quantization axis (deg)\\
  {\sc spn\_axis\_azimuth}& P & Azimuthal angle of the spin quantization axis (deg)\\
  {\sc spn\_moment}$^*$& L & Determines whether to evaluate the spin 
magnetic moment per cell\\  \hline
\end{tabular}
\caption[Parameter file keywords controlling \postw.]  {{\tt
    seedname.win} file keywords controlling the general behaviour of
  the modules in \postw. Argument types are represented by, I for a
  integer, R for a real number, P for a
  physical value, L for a logical value and S for a text string.\\
  \textcolor{red}{$^*$The keyword {\tt spn\_moment} does not affect
    the behavior of the modules in \postw, and does not really belong
    to any of them. It is listed here for lack of a better place.}}
\label{parameter_keywords_postw90}
\end{center}
\end{table}


\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
  \hline
  Keyword & Type & Description \\
  &      &             \\
  \hline\hline
  \multicolumn{3}{|c|}{{\tt dos} Parameters} \\
  \hline
  {\sc dos}  & L & Calculate the density of states and related properties\\
  {\sc dos\_task}& S  & List of properties to compute \\
  {\sc dos\_energy\_min} & P & Lower limit of the energy range for
  computing the DOS (eV)\\
  {\sc dos\_energy\_max}& P & Upper limit of the energy range for
  computing the DOS (eV)\\
  {\sc dos\_energy\_step}& R & Step for increasing the energy in the specified range (eV)\\
  {\sc dos\_project}& I & List of WFs onto which the DOS is projected\\
  {\sc dos\_interp\_mesh} & I & Dimensions of the uniform interpolation $k$-mesh (one or three integers)\\ 
  {\sc dos\_interp\_mesh\_spacing}& R & Minimum spacing between $k$ points in \AA$^{-1}$\\
  {\sc dos\_adpt\_smr} & L & Use adaptive smearing for the DOS \\
  {\sc dos\_adpt\_smr\_factor} & R & Adaptive smearing prefactor\\
  {\sc dos\_smr\_max} & P & Maximum allowed value for the adaptive energy smearing (eV) \\
  {\sc dos\_smr\_fixed\_en\_width} & P  & Energy smearing (if non-adaptive) for the DOS (eV) \\   
  {\sc dos\_smr\_type} & S & Analytical form used for the broadened delta function
  when computing the DOS. \\
  {\sc spn\_decomp} \textcolor{red}{({\sc dos\_spn\_decomp}?)}& L & 
Decompose the total or projected DOS into up- and down-spin parts\\
  {\sc spin\_formatted} \textcolor{red}{({\sc spn\_formatted}?)}& L & 
  Read a formatted {\tt seedname.spn} file\\
  \hline
\end{tabular}
\caption[Parameter file keywords controlling the DOS module.]  {{\tt
    seedname.win} file keywords controlling the {\tt dos}
  module. Argument types are represented by, I for a integer, R for a
  real number, P for a physical value, L for a logical value and S for
  a text string.  \textcolor{red}{(Ivo) Will we bring back the ability
    to find the Fermi level given the number of electrons per cell?}
}
\label{parameter_keywords_dos}
\end{center}
\end{table}


\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
  \hline
  Keyword & Type & Description \\
  &      &             \\
  \hline\hline
  \multicolumn{3}{|c|}{{\tt kpath} Parameters} \\
  \hline
  {\sc kpath}  & L & Calculate properties along a piecewise linear path in the BZ \\
  {\sc kpath\_task}& L & List of properties to evaluate\\
  {\sc kpath\_num\_points}& I & Number of points in the first kpath segment\\
  {\sc kpath\_bands\_colour}& S & Property used to color the energy bands along the path\\
  \hline
\end{tabular}
\caption[Parameter file keywords controlling the kpath module.]  {{\tt
    seedname.win} file keywords controlling the {\tt kpath}
  module. Argument types are represented by, I for a integer, R for a
  real number, P for a physical value, L for a logical value and S for
  a text string.}
\label{parameter_keywords_kpath}
\end{center}
\end{table}

\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
  \hline
  Keyword & Type & Description \\
  &      &             \\
  \hline\hline
  \multicolumn{3}{|c|}{{\tt kslice} Parameters} \\
  \hline
  {\sc kslice}  & L & Calculate properties on a slice in the BZ \\
  {\sc kslice\_task}& S & List of properties to evaluate\\
  {\sc kslice\_corner}& R & Position of the corner of the slice\\
  {\sc kslice\_b1}& R & First vector defining the slice\\
  {\sc kslice\_b2}& R & Second vector defining the slice\\
  {\sc kslice\_interp\_mesh}& I & Dimensions of the uniform interpolation 
$k$-mesh on the slice (one or two integers)\\
  {\sc kslice\_cntr\_energy}& P & Energy level for  plotting 
isoenergy contour lines (eV)\\
  \hline
\end{tabular}
\caption[Parameter file keywords controlling the kslice module.]
{{\tt seedname.win} file keywords controlling the {\tt kslice}
  module. Argument types are represented by, I for a integer, R for a
  real number, P for a physical value, L for a logical value and S for
  a text string.}
\label{parameter_keywords_kslice}
\end{center}
\end{table}



\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
  \hline
  Keyword & Type & Description \\
  &      &             \\
  \hline\hline
  \multicolumn{3}{|c|}{{\tt berry} Parameters} \\
  \hline
  {\sc berry}  & L & Calculate Berry-type quantities \\
  {\sc berry\_task}& L  & List of properties to compute \\
  {\sc berry\_interp\_mesh} & I & Dimensions of the uniform interpolation $k$-mesh 
  (one or three integers)\\ 
  {\sc berry\_interp\_mesh\_spacing}& R & Minimum spacing between $k$ points in 
  \AA$^{-1}$\\
  {\sc berry\_adpt\_thresh} & P & Threshold value of the Berry curvature or 
  $k$-space orbital magnetization for adaptive mesh refinement\\ 
  {\sc berry\_adpt\_mesh} & I & Linear dimension of the adaptively refined 
  $k$-mesh\\ 
  {\sc optics\_time\_parity}& S & Time parity of the optical conductivity tensor\\ 
  {\sc optics\_energy\_min} & P & Lower limit of the energy range for
  optical spectra and JDOS (eV) \\
  {\sc optics\_energy\_max}& P & Upper limit of the energy range for
  optical spectra and JDOS (eV) \\
  {\sc optics\_energy\_step}& R &  Step for increasing the energy in the 
  specified range (eV)\\
  {\sc optics\_adpt\_smr} & L & Use adaptive smearing for the 
  optical conductivity and JDOS \\
  {\sc optics\_adpt\_smr\_factor} & R & Adaptive smearing prefactor \\
  {\sc optics\_smr\_type} & S & Analytical form used for the broadened delta function
  when computing the optical conductivity and JDOS\\  
  {\sc optics\_smr\_max} & P & Maximum allowed value for the 
  adaptive energy smearing (eV) \\
  {\sc optics\_smr\_fixed\_en\_width} & P  & Energy smearing (if non-adaptive)
  for the optical conductivity and JDOS (eV) \\
  {\sc spn\_decomp} \textcolor{red}{({\sc optics\_spn\_decomp}?)}& L & Decompose the optical conductivity into
  up $\rightarrow$ up, down $\rightarrow$ down, and spin-flip parts\\
  {\sc uHu\_formatted}& L & Read a formatted {\tt seedname.uHu} file \\
  {\sc spin\_formatted} \textcolor{red}{({\sc spn\_formatted}?)}& L & Read a formatted {\tt seedname.spn} file \\
%  {\sc uIu\_formatted}& L & Read a formatted uIu file\\
  \hline
\end{tabular}
\caption[Parameter file keywords controlling the Berry module.]  {{\tt
    seedname.win} file keywords controlling the {\tt berry}
  module. Argument types are represented by, I for a integer, R for a
  real number, P for a physical value, L for a logical value and S for
  a text string.}
\label{parameter_keywords_berry}
\end{center}
\end{table}



\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
\hline
Keyword & Type & Description \\
        &      &             \\
\hline\hline
\multicolumn{3}{|c|}{{\tt BoltzWann} Parameters} \\
\hline
{\sc boltzwann}   & L & Calculate Boltzmann transport coefficients \\
{\sc boltz\_interp\_mesh} & I & Dimensions of the uniform interpolation 
$k$-mesh (one or three integers)\\ 
{\sc boltz\_interp\_mesh\_spacing} & R & Minimum spacing between $k$ points in \AA$^{-1}$\\
{\sc boltz\_relax\_time} & P & Relaxation time in fs\\
{\sc boltz\_mu\_min} & P & Minimum value of the chemical potential $\mu$ in eV\\
{\sc boltz\_mu\_max} & P & Maximum value of the chemical potential $\mu$ in eV\\
{\sc boltz\_mu\_step} & R & Step for $\mu$ in eV\\
{\sc boltz\_temp\_min} & P & Minimum value of the temperature $T$ in K \\
{\sc boltz\_temp\_max} & P & Maximum value of the temperature $T$ in K \\
{\sc boltz\_temp\_step} & R & Step for $T$ in K \\
{\sc boltz\_tdf\_energy\_step} & R & Energy step for the TDF (eV) \\
{\sc boltz\_tdf\_smr\_en\_width} & P & Energy smearing for the TDF (eV) \\
{\sc boltz\_tdf\_smr\_type} & S & Smearing type for the TDF \\
{\sc boltz\_calc\_also\_dos} & L & Calculate also DOS while calculating the TDF\\
{\sc boltz\_dos\_energy\_min} & P & Minimum value of the energy for the DOS in eV \\
{\sc boltz\_dos\_energy\_max} & P & Maximum value of the energy for the DOS in eV \\
{\sc boltz\_dos\_energy\_step} & R & Step for the DOS in eV\\
{\sc boltz\_dos\_smr\_type} & S & Smearing type for the DOS \\
{\sc boltz\_dos\_adpt\_smr} & L & Use adaptive smearing for the DOS \\
{\sc boltz\_dos\_adpt\_smr\_factor} & R & Adaptive smearing prefactor\\
{\sc boltz\_dos\_smr\_fixed\_en\_width} & P  & Energy smearing (if non-adaptive) for the DOS (eV) \\
{\sc boltz\_bandshift} & L & Rigid bandshift of the conduction bands\\
{\sc boltz\_bandshift\_firstband} & I & Index of the first band to shift\\
{\sc boltz\_bandshift\_energyshift} & P & Energy shift of the conduction bands (eV)\\
\hline
\end{tabular}
\caption[Parameter file keywords controlling the \bw\ module.]
{{\tt seedname.win} file keywords controlling the \bw\ module (calculation of the Boltzmann transport coefficients in the Wannier basis). Argument types
are represented by, I for a integer, R for a real number, P for a
physical value, L for a logical value and S for a text string.}
\label{parameter_keywords_bw}
\end{center}
\end{table}

\begin{table}[hH!]
\begin{center}
\begin{tabular}{|c|c|p{6cm}|}
\hline
Keyword & Type & Description \\
        &      &             \\
\hline\hline
\multicolumn{3}{|c|}{\emph{Generic Band Interpolation} Module Parameters} \\
\hline
{\sc geninterp}   & L & Calculate bands for given set of $k$ points \\
{\sc geninterp\_alsofirstder} & L & Calculate also first derivatives\\ 
{\sc geninterp\_single\_file} & L & Write a single file or one for each
process\\ 
\hline
\end{tabular}
\caption[Parameter file keywords controlling the Generic Band Interpolation module.]
{{\tt seedname.win} file keywords controlling the Generic Band Interpolation module. Argument types
are represented by, I for a integer, R for a real number, P for a
physical value, L for a logical value and S for a text string.}
\label{parameter_keywords_geninterp}
\end{center}
\end{table}

\clearpage
\section{DOS}
\subsection[dos]{\tt logical :: dos}
Determines whether to enter the DOS routines.

The default value is \verb#false#.


\subsection[dos\_task]{\tt character(len=120) ::  dos\_task}
The quantity to compute when {\tt dos=.true.}

The valid options for this parameter are:
\begin{itemize}
\item[{\bf --}] \verb#dos_plot# Density of states. An output data file
  {\tt seedname\_dos.dat} is created, containing the energy values in
  the first column and the total DOS in the second (but see {\tt
    spn\_decomp} below).
%\item[{\bf --}]  \verb#dos_plot# Density of states
\end{itemize}


The default value is \verb#dos_plot#.


\subsection[dos\_min\_energy]{\tt real(kind=dp) :: dos\_min\_energy}
Lower limit of the energy range for computing the DOS.
Units are eV.

The default value is the minimum value of the energy eigenvalues
stored in {\tt seedname.eig}, minus 0.6667.

\subsection[dos\_max\_energy]{\tt real(kind=dp) :: dos\_max\_energy}
Upper limit of the energy range for computing the DOS.
Units are eV.

If an inner energy window was specified, 
the default value is the upper bound of the innter energy window, plus 0.6667.
Otherwise it is  the maximum value of the energy eigenvalues
stored in {\tt seedname.eig}, plus 0.6667.

\subsection[dos\_energy\_step]{\tt real(kind=dp) :: dos\_energy\_step}
Energy step for the grid of energies used to plot the dos. Units are eV.

The default value is 0.01~eV.

\subsection[dos\_project]{\tt integer :: dos\_project(:)}

If present {\tt postw90} computes, instead of the total DOS, the
partial DOS projected onto the WFs listed. The WFs are numbered
according to the seedname.wout file.

For example, to project onto WFs 2, 6, 7, 8, and 12:

{\tt dos\_project : 2, 6-8, 12}


\subsection[dos\_interp\_mesh]{\tt integer :: dos\_interp\_mesh(:)}
Dimensions of the interpolation grid used for calculating the DOS-related tasks.

If three integers $l$ $m$ $n$ are given, the reciprocal-space cell
subtended by the three primitive translations is sampled on a uniform
$l\times m\times n$ grid.  If only one integer $m$ is given, an
$m\times m\times m$ grid is used.

{\tt dos\_interp\_mesh\_spacing} and {\tt dos\_interp\_mesh} may not
both be defined in the same input file.

If neither {\tt dos\_interp\_mesh\_spacing} nor {\tt
  dos\_interp\_mesh} are defined, then the grid defined either with
{\tt interp\_mesh\_spacing} or {\tt interp\_mesh} is used (if defined,
otherwise an error is issued).

\subsection[dos\_interp\_mesh\_spacing]{\tt real(kind=dp) :: dos\_interp\_mesh\_spacing}
An alternative way of specifying the interpolation grid for
DOS-related tasks. This flag defines the minimum distance for
neighboring $k$ points along each of the three directions in $k$
space. 

The units are \AA$^{-1}$.

{\tt dos\_interp\_mesh\_spacing} and {\tt dos\_interp\_mesh} may
not both be defined in the same input file.

If neither {\tt dos\_interp\_mesh\_spacing} nor {\tt
  dos\_interp\_mesh} are defined, then the grid defined either with
{\tt interp\_mesh\_spacing} or {\tt interp\_mesh} is used (if defined,
otherwise an error is issued).


\subsection[dos\_adpt\_smr]{\tt logical :: dos\_adpt\_smr}
Determines whether to use an adaptive scheme for broadening the
DOS. If \verb#true#, the values for the smearing widths are 
controlled by the flag {\tt dos\_adpt\_smr\_factor}.

If {\tt dos\_adpt\_smr} is not specified, then the value of {\tt
  adpt\_smr} is used.  

The default value is \verb#true#.


\subsection[dos\_adpt\_smr\_factor]{\tt real(kind=dp) :: dos\_adpt\_smr\_factor}

The width $W_{n{\bf k}}$ of the broadened delta function used to
determine the contribution to the DOS from band $n$ at point ${\bf k}$
is calculated as
%
$$
W_{n{\bf k}}=\frac{a}{\textcolor{red}{\sqrt{2}}}\vert
\nabla_{\bf k} E_{n{\bf k}}\vert \Delta k,
$$ 
%
\textcolor{red}{{\bf [Get rid of $1/\sqrt{2}$ factor here and in the code?! 
Confusing, and does not appear in the YWVS07 paper. May need to change default value of
{\tt dos\_smr\_max}]}}\\
where the dimensionless factor $a$ is given by {\tt
  dos\_adpt\_smr\_factor}. $\Delta k$ is taken to be the largest of
the mesh spacings along the three reciprocal lattice vectors ${\bf
  b_1}$, ${\bf b_2}$, and ${\bf b_3}$.  If the calculated value of
$W_{n{\bf k}}$ exceeds {\tt dos\_smr\_max}, the latter
value is used.

If {\tt dos\_adpt\_smr\_factor} is not specified, then the value of {\tt
  adpt\_smr\_factor} is used.  

The default value is 2.0.


\subsection[dos\_smr\_max]{\tt real(kind=dp) ::
  dos\_smr\_max}

See description given immediately above.

The default value is 1.0.

\textcolor{red}{[Create ``global'' variable {\tt smr\_max} and then link
{\tt dos\_} and {\tt optics\_} subvariables?]}

\subsection[dos\_smr\_en\_width]{\tt logical :: dos\_smr\_en\_width}
Energy width for the smearing function for the DOS. Used only if {\tt
  dos\_adpt\_smr} is \verb#false#.

The units are eV. The default value is 0~eV. Note that if the width is
smaller than twice the energy step {\tt dos\_energy\_step}, the DOS
will be unsmeared (thus the default is to have an unsmeared DOS).


\subsection[dos\_smr\_type]{\tt  character(len=120) :: dos\_smr\_type}

Defines the analytical form used for the broadened delta function in
the computation of the DOS.

\begin{itemize}
  
\item[{\bf --}]
  {\tt gauss}: Gaussian smearing

\item[{\bf --}]
  \textcolor{red}{{\tt m-pn}: derivative of the $n$-th order
    Methfessel-Paxton function ($n\geq 0$)}

\item[{\bf --}]
  {\tt m-v} or {\tt cold}: derivative of the Marzari--Vanderbilt cold-smearing function

\item[{\bf --}]
  {\tt f-d}: derivative of the Fermi-Dirac distribution function

\end{itemize}

If {\tt dos\_smr\_type} is not specified, then the value of {\tt
  smr\_type} is used.  

The default value is {\tt gauss}.

\subsection[spn\_decomp]{\tt logical :: spn\_decomp}
If {\tt true}, two extra columns are added to {\tt seedname\_dos.dat},
containing the decomposition of the DOS (total or orbital-projected)
of a spinor calculation into up-spin and down-spin parts (relative to
the quantization axis defined by the input variables {\tt
  spn\_axis\_polar} and {\tt spn\_axis\_azimuth}). The file {\tt
  seedname.spn} must be present at input.

The default value is \verb#false#.

%\subsection[evaluate\_spin\_moment]{\tt logical :: evaluate\_spin\_moment}
%Determines whether to evaluate the spin moment.

The default value is \verb#false#.

\subsection[spin\_formated]{\tt character(len=20) :: spin\_formatted}

If \verb#spin_formatted#=\verb#TRUE#, then the spin matrix elements will be
read from disk as formatted (ie ASCII) files; otherwise they will be
read as unformatted files. Unformatted is generally preferable as the
files will take less disk space and I/O is significantly
faster. However such files will not be transferable between all
machine architectures and formatted files should be used if
transferability is required (i.e., for test cases).

The default value of this parameter is $\verb#FALSE#$.


\clearpage
\section{kpath}

\subsection[berry]{\tt logical :: kpath}
Determines whether to enter the kpath routines.

The default value is \verb#false#.


\subsection[kpath\_task]{\tt character(len=120) ::  kpath\_task} 
The quantities to plot when {\tt kpath=.true.} 

The valid options for this parameter are:
\begin{itemize}

\item[{\bf --}] \verb#bands# Energy bands. Two files are
  created: 
\begin{itemize}
  
   \item[$\cdot$] {\tt seedname\_band.dat} (data file)

   \item[$\cdot$] {\tt seedname-band.gnu} ({\tt gnuplot} script)

\end{itemize}

\item[{\bf --}] \verb#curv# Berry curvature summed over the occupied
  bands. Four files are created:

\begin{itemize}

   \item[$\cdot$] {\tt seedname-curv.dat} (data file) 

   \item[$\cdot$] {\tt seedname-curv\_\{x,y,z\}.gnu} ({\tt gnuplot} scripts)

\end{itemize}

\item[{\bf --}] \verb#morb# Integrand of the $k$-space orbital
  magnetization formula. Four output files are created:

\begin{itemize}

   \item[$\cdot$] {\tt seedname-morb.dat} (data file)

   \item[$\cdot$] {\tt seedname-morb\_\{x,y,z\}.gnu} ({\tt gnuplot}
     scripts).

\end{itemize}

\item[{\bf --}] Any combination of the above. For example,

{\tt k\_path\_task = bands+curv}

will generate the data files and scripts for plotting both the energy
bands and the Berry curvature along the specified path.


\end{itemize}

The default value is {\tt bands}.


\subsection[kpath\_num\_points]{\tt integer :: kpath\_num\_points}

If $\verb#kpath#=\verb#TRUE#$, then the number of points along
the first section of the bandstructure plot given by
\verb#kpoint_path#. Other sections will have the same density of
k-points. 

The default value for \verb#kpath_num_points# is 100.


\subsection[kpath\_colour]{\tt character(len=120) ::
  kpath\_bands\_colour}
When {\tt kpath\_task = bands}, colour code the energy bands according
to the specified quantity

The valid options for this parameter are:
\begin{itemize}
\item[{\bf --}]  \verb#spin# Spin projection along the quantization axis
defined by the variables {\tt spn\_axis\_polar} and {\tt spn\_axis\_azimuth},
for a spinor calculation
\item[{\bf --}]  \verb#none# no colour coding (default)
\end{itemize}



\clearpage
\section{kslice}

\subsection[berry]{\tt logical :: kslice}
Determines whether to enter the kslice routines.

The default value is \verb#false#.

\subsection[kslice\_task]{\tt character(len=120) ::  kslice\_task}
The quantity to plot when {\tt kslice=.true.} 

The valid options for this parameter are:
\begin{itemize}

\item[{\bf --}] \verb#energy_cntr# Constant energy contours
  (isolines). The following output files are created:

  \begin{itemize}

  \item[$\cdot$] {\tt seedname\_slice\_\{x,y\}.dat}: reduced coordinates
    of grid points ({\tt python} data files)

  \item[$\cdot$] {\tt seedname\_slice\_bands.dat}: energy eigenvalues
    on the grid, for all bands ({\tt python} data file)

  \item[$\cdot$] {\tt seedname-energy\_cntr.py}: {\tt python} script

  \item[$\cdot$] {\tt seedname\_xyz\_n.dat}: reduced coordinates of
    grid points and energy eigenvalues, separately for each band {\tt
      n} ({\tt gnuplot} data file)

  \item[$\cdot$] {\tt seedname-energy\_cntr.gnu}: {\tt gnuplot} script

  \end{itemize}

\item[{\bf --}] \verb#curv_heatmap# $k$-space Berry curvature summed over
  occupied bands, as a heatmap

  \begin{itemize}

  \item[$\cdot$] {\tt seedname\_slice\_\{x,y\}.dat}: reduced coordinates
    of grid points 
    
  \item[$\cdot$] {\tt seedname-slice\_curv.dat}: Berry curvature 
    on the grid, summed over bands
    
  \item[$\cdot$] {\tt seedname-curv\_\{x,y,z\}-heatmap.py}: {\tt
      python} scripts, one for each Cartesian component of the Berry
    curvature. If the string {\tt energy\_cntr} is also present, the
    script plots both the curvature heatmap {\it and} the isoenergy
    contours.
    
  \end{itemize}

\item[{\bf --}] \verb#morb_heatmap# Integrand of the $k$-space orbital
  magnetization formula, as a heatmap

  \begin{itemize}

  \item[$\cdot$] {\tt seedname\_slice\_\{x,y\}.dat}: reduced coordinates
    of grid points 
    
  \item[$\cdot$] {\tt seedname-slice\_morb.dat}: $k$-space orbital
    magnetization on the grid
    
  \item[$\cdot$] {\tt seedname-morb\_\{x,y,z\}-heatmap.py}: {\tt
      python} scripts, one for each Cartesian component of the orbital
    magnetization. If the string {\tt energy\_cntr} is also present,
    the script plots both the magnetization heatmap {\it and} the
    isoenergy contours.
    
  \end{itemize}

\end{itemize}

The default value is {\tt energy\_cntr}.

\subsection[kslice\_corner]{\tt real(kind=dp) :: kslice\_corner(3)}
Reduced coordinates of the lower-left corner of the slice in k-space.

The default value is $(0.0,0.0,0.0)$

\subsection[kslice\_corner]{\tt real(kind=dp) :: kslice\_b1(3)}
Reduced coordinates of the first reciprocal-space vector 
defining the slice.

The default value is $(1.0,0.0,0.0)$.

\subsection[kslice\_corner]{\tt real(kind=dp) :: kslice\_b2(3)}
Reduced coordinates of the second reciprocal-space vector 
defining the slice.

The default value is $(0.0,1.0,0.0)$.

\subsection[kslice\_num\_points]{\tt integer :: kslice\_interp\_mesh(2)}

Dimensions of the $k$-point grid covering the slice.
If two integers $m$ $n$ are given, the slice is sampled on a uniform
$m\times n$ grid.  If only one integer $m$ is given, an $m\times m$
grid is used.

The default value for \verb#kslice_interp_mesh# is 50.

\textcolor{red}{{[Should we tie {\tt kslice\_interp\_mesh} the ``global''
{\tt interp\_mesh}? Note that it is two-dimensional only. Take first
two value from the three-dimensional{\tt interp\_mesh}?}}


\subsection[kslice\_cntr\_energy]{\tt real(kind=dp) :: kslice\_cntr\_energy}

Energy level in eV for plotting isoenergy contour when {\tt
  kslice\_task = energy\_cntr}.

The default value is {\tt fermi\_energy}, if its value is
defined. Otherwise, no default value is given.

\clearpage
\section{berry}

\subsection[berry]{\tt logical :: berry}
Determines whether to enter the berry routines.

The default value is \verb#false#.


\subsection[berry\_task]{\tt character(len=120) ::  berry\_task}
The quantity to compute when {\tt berry=.true.}

The valid options for this parameter are:
\begin{itemize}
\item[{\bf --}] \verb#ahc# Anomalous Hall Conductivity components
  $\sigma_{xy}=\sigma_z$, $\sigma_{yz}=\sigma_x$, and
  $\sigma_{zx}=\sigma_y$
\item[{\bf --}]  \verb#morb# Orbital magnetisation vector. Requires the
presence of the file {\tt seedname.uHu} at input.

\item[{\bf --}] \verb#optics# Absorptive part of the interband optical
  conductivity, and joint density of states (JDOS).  The output data
  files and scripts depend on {\tt optics\_time\_parity} (see below).

\item[{\bf --}] The combinations {\tt curv+optics} and {\tt morb+optics}
({\tt curv+morb} is {\it not} allowed)

\end{itemize}
There is no default value


\subsection[berry\_interp\_mesh]{\tt integer :: berry\_interp\_mesh(:)}
Dimensions of the interpolation grid used for carrying out the BZ
integrals.

If three integers $l$ $m$ $n$ are given, the reciprocal-space cell
subtended by the three primitive translations is sampled on a uniform
$l\times m\times n$ grid.  If only one integer $m$ is given, an
$m\times m\times m$ grid is used.

{\tt berry\_interp\_mesh\_spacing} and {\tt berry\_interp\_mesh} may not
both be defined in the same input file.

If neither {\tt berry\_interp\_mesh\_spacing} nor {\tt
  berry\_interp\_mesh} are defined, then the grid defined either with
{\tt interp\_mesh\_spacing} or {\tt interp\_mesh} is used (if defined,
otherwise an error is issued).

\subsection[berry\_interp\_mesh\_spacing]{\tt real(kind=dp) :: berry\_interp\_mesh\_spacing}
An alternative way of specifying the BZ integration grid. This flag
defines the minimum distance for neighboring $k$ points along each of
the three directions in $k$ space.


The units are \AA$^{-1}$.

{\tt berry\_interp\_mesh\_spacing} and {\tt berry\_interp\_mesh} may
not both be defined in the same input file.

If neither {\tt berry\_interp\_mesh\_spacing} nor {\tt
  berry\_interp\_mesh} are defined, then the grid defined either with
{\tt interp\_mesh\_spacing} or {\tt interp\_mesh} is used (if defined,
otherwise an error is issued).


\subsection[berry\_adpt\_thresh]{\tt real(kind=dp) :: berry\_adpt\_thresh(:)}

Magnitude of the Berry curvature in \AA$^2$, or of the $k$-space
orbital magnetization in eV$\cdot$\AA$^2$, that triggers adaptive mesh
refinement when {\tt berry\_task} contains either {\tt curv} or {\tt
  morb}.

Default value is 100.0.

\subsection[berry\_adpt\_mesh]{\tt integer :: berry\_adpt\_mesh(:)}

If a positive integer $n$ is given, an $n\times n\times n$ mesh is
placed around points on the uniform mesh (defined by either {\tt
  berry\_interp\_mesh} or {\tt berry\_interp\_mesh\_spacing}) where
the magnitude of the $k$-space Berry curvature or orbital
magnetization exceeds the threshold value specified in {\tt
  berry\_adpt\_thresh}. This can be used to densify the BZ
integration mesh around spikes in the integrand.

The default value is 1.

\subsection[berry\_spectrum\_time\_parity]{\tt character(len=120) ::  optics\_time\_parity}
The time parity of the optical conductivity tensor to compute when
{\tt berry\_task=optics}

The valid options for this parameter are:
\begin{itemize}
\item[{\bf --}]  \verb#even# Calculate ${\rm Re}\,\sigma_{\alpha\beta}(\omega)={\rm Re}\,\sigma_{\beta\alpha}(\omega)$ and the JDOS. \textcolor{red}{[Describe output files here]}
\item[{\bf --}]  \verb#odd#  Calculate ${\rm Im}\,\sigma_{\alpha\beta}(\omega)=-{\rm Im}\,\sigma_{\beta\alpha}(\omega)$  and the JDOS. \textcolor{red}{[Describe output files here]}
\end{itemize}

The default value is {\tt even}.


\subsection[optics\_energy\_min]{\tt real(kind=dp) :: optics\_energy\_min}
Lower limit of the energy range for computing the optical conductivity
and JDOS.  Units are eV.

The default value is the minimum value of the energy eigenvalues
stored in {\tt seedname.eig}, minus 0.6667.

\subsection[optics\_energy\_max]{\tt real(kind=dp) :: optics\_energy\_max}
Upper limit of the energy range for computing the optical conductivity
and JDOS.  Units are eV.

If an inner energy window was specified, the default value is the
upper bound of the innter energy window, plus 0.6667.  Otherwise it is
the maximum value of the energy eigenvalues stored in {\tt
  seedname.eig}, plus 0.6667.

\subsection[optics\_energy\_step]{\tt real(kind=dp) :: optics\_energy\_step}
Energy step for the grid of energies used for computing the optical
conductivity and JDOS. Units are eV.

The default value is 0.01~eV.


\subsection[optics\_adpt\_smr]{\tt logical :: optics\_adpt\_smr}
Determines whether to use an adaptive scheme for broadening the
optical spectrum and JDOS. If \verb#true#, the values for the smearing widths are 
controlled by the flag {\tt optics\_adpt\_smr\_factor}.

If {\tt optics\_adpt\_smr} is not specified, then the value of {\tt
  adpt\_smr} is used.  

The default value is \verb#true#.


\subsection[optics\_adpt\_smr\_factor]{\tt real(kind=dp) ::
  optics\_adpt\_smr\_factor}

The width $W_{n{\bf k}}$ of the broadened delta function used to
determine the contribution to the optical conductivity and JDOS from
band $n$ at point ${\bf k}$ is calculated as
%
$$
W_{n{\bf k}}=\frac{a}{\textcolor{red}{\sqrt{2}}}\vert
\nabla_{\bf k} E_{n{\bf k}}\vert \Delta k,
$$ 
%
\textcolor{red}{{\bf [Get rid of $1/\sqrt{2}$ factor here and in the code?! 
Confusing, and does not appear in the YWVS07 paper. May need to change default value of
{\tt optics\_smr\_max}]}}\\
where the dimensionless factor $a$ is given by {\tt
  optics\_adpt\_smr\_factor}. $\Delta k$ is taken to be the largest of
the mesh spacings along the three reciprocal lattice vectors ${\bf
  b_1}$, ${\bf b_2}$, and ${\bf b_3}$.  If the calculated value of
$W_{n{\bf k}}$ exceeds {\tt optics\_smr\_max}, the latter
value is used.

If {\tt optics\_adpt\_smr\_factor} is not specified, then the value of {\tt
  adpt\_smr\_factor} is used.  

The default value is 2.0.


\subsection[optics\_smr\_max]{\tt real(kind=dp) ::
  optics\_smr\_max}

See description given immediately above.

The default value is 1.0.

\textcolor{red}{[Create ``global'' variable {\tt smr\_max} and then link
{\tt dos\_} and {\tt optics\_} subvariables?]}

\subsection[optics\_smr\_en\_width]{\tt logical :: optics\_smr\_en\_width}
Energy width for the smearing function for the optical spectra
and JDOS. Used only if {\tt optics\_adpt\_smr} is \verb#false#.

The units are eV. The default value is 0~eV. Note that if the width is
smaller than twice the energy step {\tt optics\_energy\_step}, the spectra
will be unsmeared (thus the default is to have unsmeared spectra).


\subsection[optics\_smr\_type]{\tt  character(len=120) :: optics\_smr\_type}

Defines the analytical form used for the broadened delta function in
the computation of the optical spectra and JDOS.

\begin{itemize}
  
\item[{\bf --}]
  {\tt gauss}: Gaussian smearing

\item[{\bf --}]
  \textcolor{red}{{\tt m-pn}: derivative of the $n$-th order
    Methfessel-Paxton function ($n\geq 0$)}

\item[{\bf --}]
  {\tt m-v} or {\tt cold}: derivative of the Marzari--Vanderbilt cold-smearing function

\item[{\bf --}]
  {\tt f-d}: derivative of the Fermi-Dirac distribution function

\end{itemize}

If {\tt optics\_smr\_type} is not specified, then the value of {\tt
  smr\_type} is used.  

The default value is {\tt gauss}.

\subsection[spn\_decomp]{\tt logical :: spn\_decomp}
If {\tt true}, three extra columns are added to the optical
conductivity data files, containing the decomposition into up
$\rightarrow$ up, down $\rightarrow$ down, and spin-flip transitions
(relative to the quantization axis defined by the input variables {\tt
  spn\_axis\_polar} and {\tt spn\_axis\_azimuth}). The file {\tt
  seedname.spn} must be present at input.

The default value is \verb#false#.



\subsection[spin\_formated]{\tt character(len=20) :: spin\_formatted}

If \verb#spin_formatted#=\verb#TRUE#, then the spin matrix elements will be
read from disk as formatted (ie ASCII) files; otherwise they will be
read as unformatted files. Unformatted is generally preferable as the
files will take less disk space and I/O is significantly
faster. However such files will not be transferable between all
machine architectures and formatted files should be used if
transferability is required (i.e., for test cases).

The default value of this parameter is $\verb#FALSE#$.

\subsection[uHu\_formated]{\tt character(len=20) :: uHu\_formatted}

If \verb#uHu_formatted#=\verb#TRUE#, then the uHu matrix elements will be
read from disk as formatted (ie ASCII) files; otherwise they will be
read as unformatted files.

The default value of this parameter is $\verb#FALSE#$.

%\subsection[uIu\_formated]{\tt character(len=20) :: uIu\_formatted}

%If \verb#uIu_formatted#=\verb#TRUE#, then the uIu matrix elements will be
%read from disk as formatted (ie ASCII) files; otherwise they will be
%read as unformatted files.

%The default value of this parameter is $\verb#FALSE#$.




\clearpage
\section{BoltzWann}
\subsection[boltzwann]{\tt logical :: boltzwann}
Determines whether to enter the \bw\ routines.

The default value is \verb#false#.

\subsection[boltz\_interp\_mesh]{\tt integer :: boltz\_interp\_mesh(:)}
It determines the interpolation $k$ mesh used to calculate the TDF (from which the transport coefficient are calculated). If {\tt boltz\_calc\_also\_dos} is \verb#true#, the same $k$ mesh is used also for the DOS.

If three integers $l$ $m$ $n$ are given, a $l\times m\times n$ grid is used. If only one integer $m$ is given, a $m\times m\times m$ grid is used.

{\tt boltz\_interp\_mesh\_spacing} and  {\tt boltz\_interp\_mesh} may not both be defined in the same input file.

If neither {\tt boltz\_interp\_mesh\_spacing} nor  {\tt boltz\_interp\_mesh} are defined, then the grid defined either with {\tt interp\_mesh\_spacing} or {\tt interp\_mesh} is used (if defined, otherwise an error is issued).

\subsection[boltz\_interp\_mesh\_spacing]{\tt real(kind=dp) :: boltz\_interp\_mesh\_spacing}
It determines the interpolation $k$ mesh used to calculate the TDF (from which the transport coefficient are calculated). This flag defines the minimum distance for neighboring $k$ points along each of the three directions in $k$ space. If {\tt boltz\_calc\_also\_dos} is \verb#true#, the same $k$ mesh is used for the DOS.

The units are \AA$^{-1}$.

{\tt boltz\_interp\_mesh\_spacing} and  {\tt boltz\_interp\_mesh} may not both be defined in the same input file.

If neither {\tt boltz\_interp\_mesh\_spacing} nor  {\tt boltz\_interp\_mesh} are defined, then the grid defined either with {\tt interp\_mesh\_spacing} or {\tt interp\_mesh} is used (if defined, otherwise an error is issued).

\subsection[boltz\_relax\_time]{\tt real(kind=dp) :: boltz\_relax\_time}
The relaxation time to be used for the calculation of the TDF and the transport coefficients.

The units are fs.
The default value is 10~fs.

\subsection[boltz\_mu\_min]{\tt real(kind=dp) :: boltz\_mu\_min}
Minimum value for the chemical potential $\mu$ for which we want to calculate the transport coefficients.

The units are eV.
No default value.

\subsection[boltz\_mu\_max]{\tt real(kind=dp) :: boltz\_mu\_max}
Maximum value for the chemical potential $\mu$ for which we want to calculate the transport coefficients.

The units are eV.
No default value.

\subsection[boltz\_mu\_step]{\tt real(kind=dp) :: boltz\_mu\_step}
Energy step for the grid of chemical potentials $\mu$ for which we want to calculate the transport coefficients.

The units are eV.
No default value.

\subsection[boltz\_temp\_min]{\tt real(kind=dp) :: boltz\_temp\_min}
Minimum value for the temperature $T$ for which we want to calculate the transport coefficients.

The units are K.
No default value.

\subsection[boltz\_temp\_max]{\tt real(kind=dp) :: boltz\_temp\_max}
Maximum value for the temperature $T$ for which we want to calculate the transport coefficients.

The units are K.
No default value.

\subsection[boltz\_temp\_step]{\tt real(kind=dp) :: boltz\_temp\_step}
Energy step for the grid of temperatures $T$ for which we want to calculate the transport coefficients.

The units are K.
No default value.

\subsection[boltz\_tdf\_energy\_step]{\tt real(kind=dp) :: boltz\_tdf\_energy\_step}
Energy step for the grid of energies for the TDF.

The units are eV.
The default value is 0.001~eV.

\subsection[boltz\_tdf\_smr\_type]{\tt character(len=120) :: boltz\_tdf\_smr\_type}
The type of smearing function to be used for the TDF. The available strings are the same of the global {\tt smr\_type} input flag. 

The default value is the one given via the {\tt smr\_type} input flag (if defined).

\subsection[boltz\_tdf\_smr\_en\_width]{\tt real(kind=dp) :: boltz\_tdf\_smr\_en\_width}
Energy width for the smearing function. Note that for the TDF, a standard (non-adaptive) smearing scheme is used.

The units are eV.
The default value is 0~eV. Note that if the width is smaller than twice the energy step {\tt boltz\_tdf\_energy\_step}, the TDF will be unsmeared (thus the default is to have an unsmeared TDF).

\subsection[boltz\_calc\_also\_dos]{\tt logical :: boltz\_calc\_also\_dos}
Whether to calculate also the DOS while calculating the TDF.

If one needs also the DOS, it is faster to calculate the DOS using this flag instead of using the routines for the DOS, since in this way the interpolation on the $k$ points will be performed only once.

The default value is \verb#false#.

\subsection[boltz\_dos\_energy\_min]{\tt real(kind=dp) :: boltz\_dos\_energy\_min}
The minimum value for the energy grid for the calculation of the DOS.

The units are eV.
The default value is {\tt minval(eigval)-0.6667}, where  {\tt minval(eigval)} is the minimum eigenvalue returned by the ab-initio code on the ab-initio $q$ mesh.

\subsection[boltz\_dos\_energy\_max]{\tt real(kind=dp) :: boltz\_dos\_energy\_max}
The maximum value for the energy grid for the calculation of the DOS.

The units are eV.
The default value is {\tt maxval(eigval)+0.6667}, where  {\tt maxval(eigval)} is the maximum eigenvalue returned by the ab-initio code on the ab-initio $q$ mesh.

\subsection[boltz\_dos\_energy\_step]{\tt real(kind=dp) :: boltz\_dos\_energy\_step}
Energy step for the grid of energies for the DOS.

The units are eV.
The default value is 0.001~eV.

\subsection[boltz\_dos\_smr\_type]{\tt character(len=120) :: boltz\_dos\_smr\_type}
The type of smearing function to be used for the DOS. The available strings are the same of the global {\tt smr\_type} input flag. 

The default value is the one given via the {\tt smr\_type} input flag. 


\subsection[boltz\_dos\_adpt\_smr]{\tt logical :: boltz\_dos\_adpt\_smr}
Determines whether to use an adaptive scheme for broadening the
DOS. If \verb#true#, the values for the smearing widths are 
%those defined by the flags {\tt adpt\_smr\_steps} and {\tt adpt\_smr\_width}.
controlled by the flag {\tt boltz\_dos\_adpt\_smr\_factor}.

The default value is \verb#true#.



\subsection[boltz\_dos\_adpt\_smr\_factor]{\tt real(kind=dp) :: boltz\_dos\_adpt\_smr\_factor}

The width $W_{n{\bf k}}$ of the broadened delta function used to
determine the contribution to the DOS from band $n$ at point ${\bf k}$
is calculated as
%
$$
W_{n{\bf k}}=\frac{a}{\textcolor{red}{\sqrt{2}}}\vert
\nabla_{\bf k} E_{n{\bf k}}\vert \Delta k,
$$ 
%
\textcolor{red}{{\bf [Get rid of $1/\sqrt{2}$ factor here and in the
    code?!  Confusing, and does not appear in the YWVS07 paper. May
    need to change
    {\tt dos\_smr\_max}]}}\\
where the dimensionless factor $a$ is given by {\tt
  boltz\_dos\_adpt\_smr\_factor}. $\Delta k$ is taken to be the
largest of the mesh spacings along the three reciprocal lattice
vectors ${\bf b_1}$, ${\bf b_2}$, and ${\bf b_3}$.  If the calculated
value of $W_{n{\bf k}}$ exceeds {\tt dos\_smr\_max}, the
latter value is used.  \textcolor{red}{[Ivo: Giovanni, is this correct? Or
  should there be an additional variable {\tt
    boltz\_dos\_smr\_max}?]}


If {\tt boltz\_dos\_adpt\_smr\_factor} is not specified, then the value of {\tt
  adpt\_smr\_factor} is used.  

The default value is 2.0.

\subsection[boltz\_dos\_smr\_en\_width]{\tt logical :: boltz\_dos\_smr\_en\_width}
Energy width for the smearing function for the DOS. Used only if {\tt boltz\_dos\_adpt\_smr} is \verb#false#.

The units are eV.
The default value is 0~eV. Note that if the width is smaller than twice the energy step {\tt boltz\_dos\_energy\_step}, the DOS will be unsmeared (thus the default is to have an unsmeared DOS).

\textcolor{red}{[Ivo: I believe the next three variables may not be
  needed anymore, since I added ``global'' {\tt scissors\_shift} and
  {\tt num\_valence\_bands} variables.]}

\subsection[boltz\_bandshift]{\tt logical :: boltz\_bandshift}
Shift all conduction bands by a given amount (defined by {\tt boltz\_bandshift\_energyshift}).

The default value is \verb#false#.

\subsection[boltz\_bandshift\_firstband]{\tt integer :: boltz\_bandshift\_firstband}
Index of the first conduction band to shift.

That means that all bands with index $i\ge {\tt boltz\_bandshift\_firstband}$ will be shifted by  {\tt boltz\_bandshift\_energyshift}, if {\tt boltz\_bandshift} is \verb#true#.

The units are eV.
No default value; if {\tt boltz\_bandshift} is \verb#true#, this flag must be provided.

\subsection[boltz\_bandshift\_energyshift]{\tt real(kind=dp) :: boltz\_bandshift\_energyshift}
Energy shift of the conduction bands.

The units are eV.
No default value; if {\tt boltz\_bandshift} is \verb#true#, this flag must be provided.


\section{Generic Band Interpolation}
\subsection[boltzwann]{\tt logical :: geninterp}
Determines whether to enter the Generic Band Interpolation routines.

The default value is \verb#false#.

\subsection[geninterp\_alsofirstder]{\tt logical :: geninterp\_alsofirstder}
Whether to calculate also the first derivatives of the bands at the
given $k$ points.

The default value is \verb#false#.

\subsection[geninterp\_alsofirstder]{\tt logical :: geninterp\_single\_file}
Whether to write a single  {\tt seedname\_geninterp.dat} file (all I/O is done by the root node); or
instead multiple files (one for each node) with
name {\tt seedname\_geninterp\_00000.dat}, {\tt
  seedname\_geninterp\_00001.dat}, \ldots
See also the discussion in Sec.~\ref{sec:seedname.geninterp.dat} on
how to use this flag.

The default value is \verb#true#.
